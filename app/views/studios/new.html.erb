<div class="container">
    <div class="row justify-content-center">
        <div class="col-xl-6 col-lg-6 col-md-8 col-sm-12">
            <h3 class="text-center">Studio Info</h3>
            <p class="text-center">Wanting an easier way to help manage tattoo appointments?</p>
            <p class="text-center">Mad Rabbit can help! We would love to partner with you!</p>
            <%= simple_form_for(@studio) do |f| %>
                <%= f.input :name %>
                    <mapbox-address-autofill access-token="<%= ENV['MAPBOX_API_KEY'] %>">
                        <%= f.input :address, input_html: { type: "text", name: "address", autocomplete: "shipping street-address" } %>
                    </mapbox-address-autofill>
                    <%= f.input :city, input_html: { type: "text", name: "city", autocomplete: "shipping address-level2" } %>
                        <%= f.input :phone, input_html: { onkeydown: "phoneNumberFormatter()" } %>
                            <%= f.input :email%>
                                <%= f.input :facebook %>
                                    <%= f.input :instagram %>
                                        <%= f.input :tiktok %>
                                            <br>
                                            <%= f.label :studio_image, "Upload studio profile image", class: "btn upload-button" %>
                                                <%= f.input :studio_image, as: :file, label: false, input_html: { style: "display: none;" } %>
                                                    <div class="text-center" style="margin-bottom: 40px;">
                                                        <br>
                                                        <p>
                                                            <%= f.submit "SUBMIT INFO", class: "primary-button" %>
                                                        </p>
                                                        <% end %>
                                                            <p>
                                                                <%= link_to "Cancel", root_path, class: "secondary-button" %>
                                                            </p>
                                                    </div>
        </div>
    </div>
</div>
<script>
    function formatPhoneNumber(value) {
        if (!value) return value;
        const phoneNumber = value.replace(/[^\d]/g, "");
        const phoneNumberLength = phoneNumber.length;
        if (phoneNumberLength < 4) return phoneNumber;
        if (phoneNumberLength < 7) {
            return `(${phoneNumber.slice(0, 3)}) ${phoneNumber.slice(3)}`;
        }
        return `(${phoneNumber.slice(0, 3)}) ${phoneNumber.slice(
        3,
        6
      )}-${phoneNumber.slice(6, 9)}`;
    }

    function phoneNumberFormatter() {
        const inputField = document.getElementById("studio_phone");
        const formattedInputValue = formatPhoneNumber(inputField.value);
        inputField.value = formattedInputValue;
    }
</script>