<div class="container">
    <div class="row justify-content-center">
        <div class="col-xl-6 col-lg-6 col-md-8 col-sm-12">
            <h2 class="text-center">Update Account</h2>

            <%= simple_form_for(current_user, html: { method: :put }) do |f| %>
                <div class="form-inputs">
                    <%= f.input :first_name,
              required: true,
              autofocus: true,
              input_html: { autocomplete: "First name" }%>
                        <%= f.input :last_name,
              required: true,
              autofocus: true,
              input_html: { autocomplete: "Last name" }%>
                            <%= f.input :email,
              required: true,
              autofocus: true,
              input_html: { autocomplete: "email" }%>
                                <%= f.input :phone,
              required: true,
              autofocus: true,
              input_html: { autocomplete: "phone", onkeydown: "phoneNumberFormatter()" }%>
                </div>
                <br>
                <div class="form-actions text-center" style="margin-top: 50px;">
                    <p>
                        <%= f.button :submit, "UPDATE ACCOUNT", class: "primary-button" %>
                    </p>
                    <% end %>
                        <p>
                            <%= link_to "Delete account", current_user, method: :delete, data: { confirm: "Are you sure you would like to delete your Mad Rabbit account?" }, method: :delete,  class: "secondary-button" %>
                        </p>
                </div>

        </div>
    </div>
</div>
<script>
    function formatPhoneNumber(value) {
        if (!value) return value;
        const phoneNumber = value.replace(/[^\d]/g, "");
        const phoneNumberLength = phoneNumber.length;
        if (phoneNumberLength < 4) return phoneNumber;
        if (phoneNumberLength < 7) {
            return `(${phoneNumber.slice(0, 3)}) ${phoneNumber.slice(3)}`;
        }
        return `(${phoneNumber.slice(0, 3)}) ${phoneNumber.slice(
        3,
        6
      )}-${phoneNumber.slice(6, 9)}`;
    }

    function phoneNumberFormatter() {
        const inputField = document.getElementById("user_phone");
        const formattedInputValue = formatPhoneNumber(inputField.value);
        inputField.value = formattedInputValue;
    }
</script>